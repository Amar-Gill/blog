---
import PageLayout from "@/layouts/Base";
import PostPreview from "@/components/blog/PostPreview";
import SocialList from "@/components/SocialList";
import { sortMDByDate } from "@/utils";
import type { Post } from "@/data/posts";

const MAX_POSTS = 10;
const allPosts = await Astro.glob<Post>("./posts/*.mdx");
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS);
---

<PageLayout meta={{ title: "Home" }}>
	<section>
		<h1 class="title mb-6">Hello World!</h1>
		<p class="mb-4">
			Hi, Iâ€™m a theme for Astro, an example of how you can use this starter to create a personal
			blog. If you want to know more about how you can customise me, add more posts, and make it
			your own, click on one of the social links which will take you to my repo.
		</p>
		<SocialList />
	</section>
	<section aria-label="Blog post list" class="mt-16">
		<h2 class="title mb-4 text-xl">Posts</h2>
		<ul class="space-y-4 sm:space-y-2">
			{
				allPostsByDate.map((p) => (
					<li class="flex flex-wrap items-center gap-x-2 [&_q]:w-full">
						<PostPreview post={p} as="h2" />
					</li>
				))
			}
		</ul>
	</section>
	<section class="mt-16">
		<h2 class="title mb-4 text-xl">Technologies</h2>
		<ul class="space-y-4 sm:space-y-2">
			<li>
				<a
					href="https://neovim.io/"
					target="_blank"
					rel="noopener noreferrer"
					class="cactus-link inline-block"
					>Neovim
				</a>:
				<p class="inline-block sm:mt-2">Hyperextensible Vim-based text editor</p>
			</li>
			<li>
				<a
					href="https://obsidian.md/"
					target="_blank"
					rel="noopener noreferrer"
					class="cactus-link inline-block"
					>Obsidian
				</a>:
				<p class="inline-block sm:mt-2">A second brain, for you, forever</p>
			</li>
			<li>
				<a
					href="https://modedesigns.com/collections/keyboards/products/sixtyfive"
					target="_blank"
					rel="noopener noreferrer"
					class="cactus-link inline-block"
					>Mode SixtyFive
				</a>:
				<p class="inline-block sm:mt-2">A metal rectangle with buttons</p>
			</li>
		</ul>
	</section>
</PageLayout>
